---
import Title from '../../../ui/Title.astro'
import MiniCard from '../../../ui/MiniCard'
import type { default_data } from '../../../../utils/interfaces/default-data'
import type { most_popular_manga } from '../../../../utils/interfaces/most-popular-manga'
import { dataMPA, dataMPM, dataTAA } from '../../../../utils/storage/data-index'
import AsideContent from '../ui/AsideContent'

const $dataMPA: default_data = dataMPA
const $dataMPM: most_popular_manga = dataMPM
const $dataTAA: default_data = dataTAA
---

<aside class='gap-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 justify-start'>
  <AsideContent title='Top Airing Anime'>
    {$dataTAA?.data?.map((data) => <MiniCard title={data?.title} text={data?.rating} highlight={`#${data?.rank}`} image={data?.images.webp.large_image_url} />)}
  </AsideContent>

  <AsideContent title='Top Popular Anime'>
    {$dataMPA?.data?.map((data) => <MiniCard title={data?.title} text={data?.rating} highlight={`⭐ ${data?.popularity}`} image={data?.images.webp.large_image_url} />)}
  </AsideContent>

  <AsideContent title='Most Popular Manga'>
    {$dataMPM?.data?.map((data) => <MiniCard title={data?.title} text={data?.status} highlight={`⭐ ${data?.popularity}`} image={data?.images.webp.large_image_url} />)}
  </AsideContent>
</aside>

<style>
  section {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  aside {
    grid-area: aside;
    padding: 1.5rem 1rem 1rem 2rem;
    background-image: url('https://images.pexels.com/photos/1694000/pexels-photo-1694000.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1');
    background-size: contain;
  }
  @media screen and (min-width: 1050px) {
    aside {
      grid-template-columns: 1fr;
    }
  }
</style>
